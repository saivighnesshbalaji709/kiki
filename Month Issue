 open line_csr(l_document_id);

    loop

      fetch line_csr into l_line;
      exit when line_csr%notfound;
      -- Bug 3592883 Increase i After the exit stmt.
      i := i + 1;

      begin

      if l_segment_num = -1 then
	 l_cost_center := '';
      else

      l_cost_center := 'SINGLE';

      dist_num := 1;

      open ccId_csr(l_line.req_line_id);
      loop
        fetch ccId_csr into cc_Id;
	exit when ccid_csr%notfound;

        if fnd_flex_ext.get_segments( 'SQLGL','GL#', l_account_id,cc_id,nsegments,l_segments) then
          l_cost_center := l_segments(l_segment_num);
        else
	  l_cost_center := '';
        end if;

	if dist_num = 1 then
		cost_center_1 := l_cost_center;
                dist_num := 2;
	else
		if l_cost_center <> cost_center_1 then
			l_cost_center := multiple_cost_center;
      	 		exit;
		end if;
	end if;
       end loop;
       close ccId_csr;

      if l_cost_center <> multiple_cost_center then
        if fnd_flex_ext.get_segments( 'SQLGL','GL#', l_account_id,cc_id,nsegments,l_segments) then
          l_cost_center := l_segments(l_segment_num);
        else
	  l_cost_center := '';
        end if;
      end if;

      end if; --if l_segment_num = -1

      exception --any exception while retrieving the cost center
        when others then
	 	l_cost_center := '';
      end;
